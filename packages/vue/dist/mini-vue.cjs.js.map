{"version":3,"file":"mini-vue.cjs.js","sources":["../../../node_modules/tslib/tslib.es6.js","../../shared/src/index.ts","../../runtime-core/src/vnode.ts","../../runtime-core/src/helpers/renderSlot.ts","../../reactivity/src/effect.ts","../../reactivity/src/baseHandlers.ts","../../reactivity/src/reactive.ts","../../reactivity/src/ref.ts","../../runtime-core/src/componentPublicInstance.ts","../../runtime-core/src/componentProps.ts","../../runtime-core/src/componentEmit.ts","../../runtime-core/src/componentSlots.ts","../../runtime-core/src/component.ts","../../runtime-core/src/apiInject.ts","../../runtime-core/src/h.ts","../../runtime-core/src/apiCreateApp.ts","../../runtime-core/src/renderer.ts","../../runtime-dom/src/nodeOps.ts","../../runtime-dom/src/patchProp.ts","../../runtime-dom/src/index.ts"],"sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n","export * from './shapeFlags'\n\n// 将所有可枚举属性的值从一个或多个源对象分配到目标对象\nexport const extend = Object.assign\n\n// 判断是否为字符串\nexport const isString = (val: unknown): val is string => typeof val === 'string'\n// 判断是否为数组\nexport const isArray = Array.isArray\n// 判断是否为函数\nexport const isFunction = (val: unknown): val is Function => typeof val === 'function'\n// 判断是否为对象\nexport const isObject = (val: unknown): val is Record<any, any> => val !== null && typeof val === 'object'\n// 判断对象是否存在该属性\nconst hasOwnProperty = Object.prototype.hasOwnProperty\nexport const hasOwn = (\n    val: object,\n    key: string | symbol\n): key is keyof typeof val => hasOwnProperty.call(val, key)\n\n// 判断两个值是否存在变动\nexport const hasChanged = (value: any, oldValue: any): boolean => !Object.is(value, oldValue)\n\n// 空函数\nexport const NOOP = () => {}\n// 空对象\nexport const EMPTY_OBJ = {}\n\n\n/**\n * 利用空间优化执行实行的工具函数\n * @param fn\n */\nconst cacheStringFunction = <T extends (str: string) => string>(fn: T): T => {\n    // 缓存空间\n    const cache: Record<string, string> = Object.create(null)\n\n    return ((str: string) => {\n        // 先查看缓存是否存在，不存在则调用函数\n        const hit = cache[str]\n        return hit || (cache[str] = fn(str))\n    }) as any\n}\n\nconst camelizeRE = /-(\\w)/g\n/**\n * 将中划线命名法转成驼峰命名法\n * @desc hello-world -> helloWorld\n * @private\n */\nexport const camelize = cacheStringFunction((str: string): string => {\n    return str.replace(camelizeRE, (_, c) => (c ? c.toUpperCase() : ''))\n})\n\n/**\n * 将str首字母大写\n * @private\n */\nexport const capitalize = cacheStringFunction(\n    (str: string) => str.charAt(0).toUpperCase() + str.slice(1)\n)\n\n/**\n * 处理为事件Key\n * @private\n */\nexport const toHandlerKey = cacheStringFunction((str: string) =>\n    str ? `on${capitalize(str)}` : ``\n)\n\n","import {Component, Data} from \"runtime-core/component\";\nimport {Ref} from \"reactivity/ref\";\nimport {RendererNode, RendererElement} from \"./renderer\"\nimport {isObject, isString, ShapeFlags} from \"shared/index\"\n\nexport const Fragment = Symbol('Fragment');\nexport const Text = Symbol('Text');\n\nexport type VNodeTypes =\n    | string\n    | VNode\n    | Component\n\nexport type VNodeRef =\n    | string\n    | Ref\n\nexport type VNodeProps = {\n    key?: string | number | symbol,\n    ref?: VNodeRef\n}\n\nexport interface VNode<HostNode = RendererNode,\n    HostElement = RendererElement,\n    ExtraProps = { [key: string]: any }> {\n    type: VNodeTypes,\n    props: VNodeProps | null,\n    children: VNodeNormalizedChildren\n\n    // DOM\n    el: HostNode | null\n\n    shapeFlag: number\n    // patchFlag: number\n}\n\ntype VNodeChildAtom =\n    | VNode\n    | string\n    | number\n    | boolean\n    | null\n    | undefined\n    | void\n\nexport type VNodeArrayChildren = Array<VNodeChild>\n\nexport type VNodeChild = VNodeChildAtom | VNodeArrayChildren\n\nexport type VNodeNormalizedChildren =\n    | string\n    | VNodeArrayChildren\n    | null\n\n/**\n * 创建vnode\n * @param type\n * @param props\n * @param children\n */\nexport function createVNode(\n    type: VNodeTypes,\n    props: (Data & VNodeProps) | null = null,\n    children: unknown = null\n): VNode {\n    const shapeFlag = isString(type)\n        ? ShapeFlags.ELEMENT\n        : ShapeFlags.COMPONENT\n\n    return createBaseVNode(\n        type,\n        props,\n        children,\n        0,\n        null,\n        shapeFlag\n    )\n}\n\nfunction createBaseVNode(\n    type: VNodeTypes,\n    props: (Data & VNodeProps) | null = null,\n    children: unknown = null,\n    patchFlag = 0,\n    dynamicProps: string[] | null = null,\n    shapeFlag = 0\n): VNode {\n    const vnode = {\n        type,\n        props,\n        children,\n        shapeFlag,\n        el: null\n    } as VNode\n\n    if (children) {\n        // |= 按位运算符\n        vnode.shapeFlag |= isString(children)\n            ? ShapeFlags.TEXT_CHILDREN\n            : ShapeFlags.ARRAY_CHILDREN\n\n        if ((vnode.shapeFlag & ShapeFlags.STATEFUL_COMPONENT) && isObject(children)) {\n            vnode.shapeFlag |= ShapeFlags.SLOTS_CHILDREN;\n        }\n    }\n\n    return vnode;\n}\n\n\nexport function createTextVNode(text: string = ' ') {\n    return createVNode(Text, {}, text);\n}\n","import {createVNode, Fragment} from \"runtime-core/vnode\";\nimport {Slots} from \"runtime-core/componentSlots\";\nimport {VNode} from \"../vnode\";\nimport {Data} from \"runtime-core/component\";\n\nexport function renderSlot(\n    slots: Slots,\n    name: string,\n    props: Data = {}\n): VNode | undefined {\n    const slot = slots[name];\n    if(slot) {\n        return createVNode(Fragment, {}, slot(props));\n    }\n}\n","import {Dep, createDep} from \"./dep\";\nimport {extend} from \"shared/index\"\n\n// 存储正在被收集依赖的ReactiveEffect实例\nlet activeEffect: ReactiveEffect | undefined;\n\n// 判断是否依赖收集\nlet shouldTrack = true;\n\ntype EffectScheduler = (...args: any[]) => any;\n\n\nexport class ReactiveEffect<T = any> {\n    public fn: () => T;\n    public scheduler: EffectScheduler | null = null;\n    // 存储那些收集到该effect的dep\n    public deps: Dep[] = [];\n    active: boolean = true;\n    onStop?: () => void;\n\n    constructor(fn, scheduler: EffectScheduler | null = null) {\n        this.fn = fn;  // 保存fn\n        this.scheduler = scheduler;\n    }\n\n    run() {\n        // 当active为false时，即已经取消响应式监听，则无需再进行依赖收集\n        if (!this.active) {\n            return this.fn()  // 执行fn函数，并将结果返回\n        }\n\n        activeEffect = this;  // 将实例赋值给activeEffect，用于依赖收集\n        shouldTrack = true;\n        const res = this.fn();\n        shouldTrack = false;\n        activeEffect = undefined;\n        return res;\n    }\n\n    stop() {\n        if (this.active) {\n            // 从依赖中将该effect删除\n            cleanupEffect(this);\n            // 执行onStop函数\n            if (this.onStop) {\n                this.onStop();\n            }\n            // 将active设置为false，避免反复调用stop反复\n            this.active = false;\n        }\n    }\n}\n\n/**\n * 将effect从依赖中清空\n * @param effect {ReactiveEffect}\n */\nfunction cleanupEffect(effect: ReactiveEffect) {\n    effect.deps.forEach((dep) => {\n        dep.delete(effect);\n    });\n    // 清空掉effect.deps\n    effect.deps.length = 0;\n}\n\ntype KeyToDepMap = Map<Dep, any>\n// 用于存储target依赖  target -> depsMap\nconst targetMap = new WeakMap<any, KeyToDepMap>();\n\n\n/**\n * 依赖收集\n * @desc  通过target和key拿到对应的dep依赖收集容器（没有则新建），然后将对应的ReactiveEffect实例存储进去\n * @param target 目标对象\n * @param key key值\n */\nexport function track(target: object, key) {\n    if (!isTracking()) return;\n\n    // 获取对应依赖的depsMap\n    let depsMap = targetMap.get(target);\n    // 没有则初始化\n    if (!depsMap) {\n        depsMap = new Map();\n        targetMap.set(target, depsMap = new Map());\n    }\n\n    // 获取对应key值的依赖dep\n    let dep = depsMap.get(key);\n    // 没有则初始化\n    if (!dep) {\n        dep = createDep();\n        depsMap.set(key, dep);\n    }\n\n    // 存储依赖\n    trackEffects(dep);\n}\n\n/**\n * 收集effects\n * @param dep\n */\nexport function trackEffects(dep: Dep) {\n    if (!dep.has(activeEffect!)) {\n        // 将activeEffect存储到dep中\n        dep.add(activeEffect!/* 非空断言 */);\n        // 反向存储dep\n        activeEffect!.deps.push(dep);\n    }\n}\n\n/**\n * 判断是否可以收集依赖\n */\nexport function isTracking(): boolean {\n    return shouldTrack && activeEffect !== undefined\n}\n\n/**\n * 触发依赖\n * @desc 根据target和key获取到对应的dep，然后遍历其中所有的依赖\n * @param target\n * @param key\n */\nexport function trigger(target, key) {\n    let depsMap = targetMap.get(target);\n    if (!depsMap) return;\n\n    let dep = depsMap.get(key);\n    // 执行effects\n    triggerEffects(dep);\n}\n\n/**\n * 遍历所有依赖，执行effect\n * @param dep\n */\nexport function triggerEffects(dep: Dep) {\n    // 遍历所有依赖，遍历执行\n    for (const effect of dep) {\n        if (effect.scheduler) {  // 如果存在scheduler调度函数，则执行\n            effect.scheduler()\n        } else {  // 否则执行run函数\n            effect.run();\n        }\n    }\n}\n\ninterface ReactiveEffectOptions {\n    scheduler?: EffectScheduler  // 调度函数\n    onStop?: () => void  // 停止监听时触发\n}\n\ninterface ReactiveEffectRunner<T = any> {\n    (): T;\n\n    effect: ReactiveEffect;\n}\n\n/**\n * 主要负责依赖收集\n * @param fn {Function} 依赖方法\n * @param options {ReactiveEffectOptions} 选项\n */\nexport function effect<T = any>(\n    fn: () => T,\n    options ?: ReactiveEffectOptions\n): ReactiveEffectRunner {\n    // 新建ReactiveEffect示例，将fn存储起来\n    const _effect = new ReactiveEffect(fn);\n\n    if (options) {\n        // 合并options到_effect中\n        extend(_effect, options);\n    }\n\n    // 执行run方法，调用fn函数，从而触发fn中的响应式数据进行依赖收集\n    _effect.run();\n\n    // 返回一个runner函数\n    const runner = _effect.run.bind(_effect) as ReactiveEffectRunner\n    runner.effect = _effect;\n    return runner;\n}\n\n/**\n * 停止runner的响应式监听\n * @param runner\n */\nexport function stop(runner: ReactiveEffectRunner) {\n    return runner.effect.stop();\n}\n","import {track, trigger} from \"./effect\";\nimport {reactive, ReactiveFlags, readonly} from \"./reactive\";\nimport {extend, isObject} from \"shared/index\"\n\nconst get = createGetter()  // 响应式\nconst shallowGet = createGetter(false, true)  // 浅响应式\nconst readonlyGet = createGetter(true)  // 只读\nconst shallowReadonlyGet = createGetter(true, true)  // 浅只读\n\n/**\n * 创建Proxy的get处理函数\n * @param isReadonly {boolean} 是否只读\n * @param shallow {boolean} 是否浅处理\n */\nfunction createGetter(isReadonly = false, shallow = false) {\n    return function get(target, key) {\n        // 用于isReactive方法，判断是否为reactive\n        if (key === ReactiveFlags.IS_REACTIVE) {\n            return !isReadonly;\n        }\n\n        if (key === ReactiveFlags.IS_READONLY) {\n            return isReadonly;\n        }\n\n        // 获取对应结果\n        const res = Reflect.get(target, key);\n\n        if (!isReadonly) { // 只读情况下不需要依赖收集\n            track(target, key);  // 依赖收集\n        }\n\n        // 浅处理无需只想下列的递归处理\n        if (shallow) {\n            return res;\n        }\n\n        // 如果res是对象的话，再次进行处理\n        if (isObject(res)) {\n            return isReadonly ? readonly(res) : reactive(res);\n        }\n\n        // 将结果返回出去\n        return res;\n    }\n}\n\nconst set = createSetter()  // 响应式\n\nfunction createSetter() {\n    return function set(target, key, value) {\n        // 执行set操作，并获取新的value值\n        const res = Reflect.set(target, key, value);\n\n        // 触发依赖\n        trigger(target, key);\n\n        // 将结果返回\n        return res;\n    }\n}\n\n// 可变的Proxy的handler\nexport const mutableHandlers: ProxyHandler<object> = {\n    get, // 拦截获取操作\n    set  // 拦截设置操作\n}\n\n// 浅处理响应式的handler\nexport const shallowReactiveHandlers = extend({}, mutableHandlers, {get: shallowGet})\n\n// 只读的handler\nexport const readonlyHandlers: ProxyHandler<object> = {\n    get: readonlyGet,\n    set(target, key) {\n        // 当被设置时发出警告\n        console.warn(`Set operation on key \"${String(key)}\" failed: target is readonly.`, target);\n        return true;\n    }\n}\n\n// 浅处理只读的handler\nexport const shallowReadonlyHandlers = extend({}, readonlyHandlers, {get: shallowReadonlyGet})\n","import {mutableHandlers, readonlyHandlers, shallowReactiveHandlers, shallowReadonlyHandlers} from \"./baseHandlers\";\nimport {isObject} from \"shared/index\"\n\nexport const enum ReactiveFlags {\n    IS_REACTIVE = '__v_isReactive',\n    IS_READONLY = '__v_isReadonly'\n}\n\n/**\n * 生成响应式对象\n * @param target\n */\nexport function reactive<T extends object>(target: T) {\n    return createReactiveObject(target, mutableHandlers)\n}\n\n/**\n * 生成浅响应式对象\n * @param target\n */\nexport function shallowReactive<T extends object>(target: T) {\n    return createReactiveObject(target, shallowReactiveHandlers)\n}\n\n/**\n * 生成只读对象\n * @param target\n */\nexport function readonly<T extends object>(target: T) {\n    return createReactiveObject(target, readonlyHandlers)\n}\n\n/**\n * 生成浅只读对象\n * @param target\n */\nexport function shallowReadonly<T extends object>(target: T) {\n    return createReactiveObject(target, shallowReadonlyHandlers)\n}\n\n/**\n * 创建Proxy\n * @param target\n * @param baseHandlers proxy处理器\n */\nfunction createReactiveObject(target: object, baseHandlers: ProxyHandler<any>) {\n    return new Proxy(target, baseHandlers)\n}\n\n/**\n * 判断是否为响应式对象\n * @param value\n */\nexport function isReactive(value: any): boolean {\n    return !!(value && value[ReactiveFlags.IS_REACTIVE])\n}\n\n/**\n * 判断是否为只读对象\n * @param value\n */\nexport function isReadonly(value: any) :boolean {\n    return !!(value && value[ReactiveFlags.IS_READONLY])\n}\n\n/**\n * 判断是否由reactive或readonly生成的proxy\n * @param value\n */\nexport function isProxy(value: any): boolean {\n    return isReactive(value) || isReadonly(value)\n}\n\n/**\n * 判断是否为对象，是的话进行响应式处理\n * @param value\n */\nexport const toReactive = <T extends unknown>(value: T): T => isObject(value) ? reactive(value) : value\n\n","import {isTracking, trackEffects, triggerEffects} from \"./effect\"\nimport {hasChanged} from \"shared/index\"\nimport {createDep, Dep} from \"./dep\";\nimport {toReactive} from \"./reactive\";\n\nexport interface Ref<T = any> {\n    value: T\n}\n\ntype RefBase<T> = {\n    dep?: Dep\n    value: T\n}\n\n/**\n * 依赖收集\n * @param ref\n */\nfunction trackRefValue(ref: RefBase<any>) {\n    if (isTracking()) {\n        if (!ref.dep) {\n            // 如果没有dep的话，初始化一个dep\n            ref.dep = createDep();\n        }\n        // 依赖收集\n        trackEffects(ref.dep!);\n    }\n}\n\n/**\n * 触发依赖\n * @param ref\n */\nexport function triggerRefValue(ref: RefBase<any>) {\n    if (ref.dep) {\n        // 触发依赖\n        triggerEffects(ref.dep);\n    }\n}\n\n// ref接口\nclass RefImpl<T> {\n    private _value: T;  // 响应式处理后的值\n    private _rawValue: T;  // 存储原始值，主要用于与newVal作比较\n    public dep ?: Dep;\n    public readonly __v_isRef = true;  // 用于isRef检验\n\n    constructor(value) {\n        this._rawValue = value;\n        this._value = toReactive(value);\n    }\n\n    get value() {\n        // 依赖收集\n        trackRefValue(this);\n        // 返回值\n        return this._value;\n    }\n\n    set value(newVal) {\n        // 判断newValue是否发生改变\n        if (hasChanged(newVal, this._rawValue)) {\n            // 赋值\n            this._rawValue = newVal;\n            this._value = toReactive(newVal);\n            // 触发依赖\n            triggerRefValue(this);\n        }\n    }\n}\n\n/**\n * ref响应式处理\n * @param value\n */\nexport function ref(value: any): Ref<any> {\n    return new RefImpl(value);\n}\n\n/**\n * 判断是否为ref变量\n * @param r\n */\nexport function isRef(r: any): r is Ref {\n    return !!(r && r.__v_isRef)\n}\n\n/**\n * 获取ref的value值，如果不是ref就返回本身\n * @param ref\n */\nexport function unref<T>(ref: T | Ref<T>): T {\n    return isRef(ref) ? ref.value : ref;\n}\n\n// proxyRefs的处理器\nconst shallowUnwrapHandlers: ProxyHandler<any> = {\n    get: (target, key) => unref(Reflect.get(target, key)),\n    set: (target, key, value) => {\n        const oldValue = target[key];\n        // 如果oldValue是一个ref值，而newValue不是，则需要特殊处理\n        if (isRef(oldValue) && !isRef(value)) {\n            oldValue.value = value\n            return true\n        } else {\n            return Reflect.set(target, key, value)\n        }\n    }\n}\n\n/**\n * ref代理\n * @param objectWithRefs\n */\nexport function proxyRefs<T extends object>(objectWithRefs: T) {\n    return new Proxy(objectWithRefs, shallowUnwrapHandlers)\n}\n","import {hasOwn} from \"shared/index\";\nimport {ComponentInternalInstance} from \"./component\"\nimport {shallowReadonly} from 'reactivity/reactive'\n\nexport interface ComponentRenderContext {\n    [key: string]: any,\n    _: ComponentInternalInstance\n}\n\nexport type PublicPropertiesMap = Record<string, (i: ComponentInternalInstance) => any>\n\nconst publicPropertiesMap: PublicPropertiesMap = {\n    $el: i => i.vnode.el,\n    $slots: i => shallowReadonly(i.slots)\n}\n\nexport const PublicInstanceProxyHandlers: ProxyHandler<any> = {\n    get({_: instance}: ComponentRenderContext, key: string) {\n        const {setupState, props} = instance;\n\n        if (hasOwn(setupState, key)) {\n            return setupState[key]\n        }else if(hasOwn(props, key)) {\n            return props[key]\n        }\n\n        const publicGetter = publicPropertiesMap[key]\n        if (publicGetter) {\n            return publicGetter(instance);\n        }\n    }\n}\n","import {ComponentInternalInstance, Data} from \"./component\";\n\nexport function initProps(\n    instance: ComponentInternalInstance,\n    rawProps: Data | null) {\n    if(rawProps) {\n        instance.props = rawProps;\n    }\n}\n","import {ComponentInternalInstance} from './component';\nimport {toHandlerKey, camelize} from \"shared/index\";\n\nexport type EmitFn = (event: string, ...args: any[]) => void\n\nexport function emit(\n    instance: ComponentInternalInstance,\n    event: string,\n    ...rawArgs: any[]\n) {\n    const {props} = instance;\n\n    let handlerName;\n    const handler = props[(handlerName = toHandlerKey(event))] ||\n        props[(handlerName = toHandlerKey(camelize(event)))];\n\n    if (handler && typeof handler === 'function') {\n        handler && handler(...rawArgs);\n    }\n}\n","import {VNode} from \"runtime-core/vnode\";\nimport {ComponentInternalInstance} from \"./component\"\nimport {VNodeNormalizedChildren} from './vnode';\nimport {isArray, isFunction, ShapeFlags} from \"shared/index\";\n\nexport type Slot = (...args: any[]) => VNode[]\n\nexport type Slots = Readonly<InternalSlots>\n\nexport type InternalSlots = {\n    [name: string]: Slot | undefined\n}\n\nexport type RawSlots = {\n    [name: string]: unknown\n}\n\nconst normalizeSlotValue = (value: unknown): VNode[] => isArray(value) ? value : [value];\n\nfunction normalizeObjectSlots(\n    rawSlots: RawSlots,\n    slots: InternalSlots\n) {\n    for (const key in rawSlots) {\n        const value = rawSlots[key];\n        if (isFunction(value)) {\n            slots[key] = (props) => normalizeSlotValue(value(props));\n        }\n    }\n}\n\nexport function initSlots(\n    instance: ComponentInternalInstance,\n    children: VNodeNormalizedChildren\n) {\n    if (instance.vnode.shapeFlag & ShapeFlags.SLOTS_CHILDREN) {\n        normalizeObjectSlots(\n            children as unknown as RawSlots,\n            (instance.slots = {})\n        )\n    }\n}\n\n\n","import {VNode} from \"runtime-core/vnode\";\nimport {EMPTY_OBJ, isFunction, isObject} from \"shared/index\";\nimport {proxyRefs} from \"reactivity/ref\";\nimport {PublicInstanceProxyHandlers} from \"runtime-core/componentPublicInstance\";\nimport {initProps} from \"runtime-core/componentProps\";\nimport {shallowReadonly} from \"reactivity/reactive\";\nimport {emit, EmitFn} from \"runtime-core/componentEmit\";\nimport {initSlots, InternalSlots} from \"runtime-core/componentSlots\";\n\n\nexport type Component = any;\n\nexport type Data = Record<string, unknown>\n\nexport interface ComponentInternalInstance {\n    vnode: VNode,\n    type: any,\n    parent: ComponentInternalInstance | null,\n    render: any,\n\n    proxy: any  // 代理this\n\n    ctx: Data,\n\n    provides: Data,\n\n    // state\n    setupState: Data,\n    props: Data,\n    slots: InternalSlots,\n    emit: EmitFn\n}\n\nexport let currentInstance: ComponentInternalInstance | null = null\n\nexport const getCurrentInstance = (): ComponentInternalInstance | null => currentInstance;\n\nexport const setCurrentInstance = (instance: ComponentInternalInstance) => currentInstance = instance\n\nexport const unsetCurrentInstance = () => currentInstance = null\n\n/**\n * 创建组件实例\n * @param vnode\n * @param parent\n */\nexport function createComponentInstance(\n    vnode: VNode,\n    parent: ComponentInternalInstance | null\n): ComponentInternalInstance {\n    const instance: ComponentInternalInstance = {\n        vnode,\n        type: vnode.type,\n        parent,\n        render: null,\n        proxy: null,\n        provides: parent ? parent.provides : EMPTY_OBJ,\n        setupState: EMPTY_OBJ,\n        props: EMPTY_OBJ,\n        slots: EMPTY_OBJ,\n        emit: null!,\n        ctx: EMPTY_OBJ\n    }\n\n    instance.ctx = {_: instance};\n    instance.emit = emit.bind(null, instance);\n    return instance;\n}\n\n/**\n * 初始化组件\n * @param instance\n */\nexport function setupComponent(instance: ComponentInternalInstance) {\n    const {props, children} = instance.vnode;\n    // 初始化属性\n    initProps(instance, props);\n\n    // 初始化插槽\n    initSlots(instance, children);\n\n    // 处理成有状态的组件\n    setupStatefulComponent(instance);\n}\n\n/**\n * 组件状态化\n * @param instance\n */\nfunction setupStatefulComponent(instance: ComponentInternalInstance) {\n    const Component = instance.type;\n    const {setup} = Component;\n\n    // 初始化组件代理\n    instance.proxy = new Proxy(instance.ctx, PublicInstanceProxyHandlers)\n    if (setup) {  // 处理setup钩子\n        setCurrentInstance(instance);\n\n        const setupResult = setup(\n            shallowReadonly(instance.props), {\n                emit: instance.emit\n            }\n        );\n\n        unsetCurrentInstance();\n\n        // 处理setup返回值\n        handleSetupResult(instance, setupResult)\n    }\n}\n\n/**\n * 处理setup返回值\n * @param instance\n * @param setupResult\n */\nfunction handleSetupResult(instance: ComponentInternalInstance, setupResult: unknown) {\n    if (isFunction(setupResult)) {\n        // TODO function\n    } else if (isObject(setupResult)) {\n        // 将setupResult响应式，并赋值给实例\n        instance.setupState = proxyRefs(setupResult);\n    }\n\n    // 当组件状态化后，实现render函数\n    finishComponentSetup(instance)\n}\n\n/**\n * 当组件状态化后，实现render函数\n * @param instance\n */\nfunction finishComponentSetup(instance: ComponentInternalInstance) {\n    const Component = instance.type;\n\n    if (Component.render) {\n        instance.render = Component.render;\n    }\n}\n","import {currentInstance} from \"runtime-core/component\";\nimport {def} from \"../../../../vue3/packages/shared/src/index\";\nimport {isFunction} from \"shared/index\";\n\nexport interface InjectionKey<T> extends Symbol {}\n\nexport function provide<T>(key: InjectionKey<T> | string | number, value: T) {\n    if (currentInstance) {\n        let provides = currentInstance.provides;\n        const parentProvides = currentInstance.parent && currentInstance.parent.provides;\n\n        // 初始化的时候，也就是组件第一次调用provide的时候，绑定通过原型链的方式绑定父级provide\n        if(provides === parentProvides) {\n            provides = currentInstance.provides = Object.create(parentProvides);\n        }\n\n        provides[key as string] = value;\n    }\n}\n\nexport function inject(\n    key: InjectionKey<any> | string,\n    defaultValue?: unknown\n) {\n    const instance = currentInstance;\n    if (instance) {\n        const provides = instance.parent && instance.provides;\n\n        if(provides && (key as string | symbol) in provides) {\n            return provides[key as string];\n        }else if(defaultValue) {\n            return isFunction(defaultValue) ?\n                defaultValue.call(instance.proxy) :\n                defaultValue;\n        }\n    }\n}\n","import {createVNode, VNode, VNodeTypes} from \"runtime-core/vnode\";\n\nexport function h(type: VNodeTypes, props = null, children = null): VNode {\n    return createVNode(type, props, children)\n}\n","import {createVNode} from \"./vnode\";\nimport {Component} from \"runtime-core/component\";\nimport {RootRenderFunction} from \"runtime-core/renderer\";\n\nexport type App<HostElement> = any\n\nexport type CreateAppFunction<HostElement> = (\n    rootComponent: Component\n) => App<HostElement>\n\nexport function createAppAPI<HostElement>(\n    render: RootRenderFunction<HostElement>\n): CreateAppFunction<HostElement> {\n    return function createApp(rootComponent: Component) {\n        return {\n            mount(rootContainer) {\n                // 创建虚拟节点vnode\n                const vnode = createVNode(rootComponent);\n                // 进行渲染\n                render(vnode, rootContainer);\n            }\n        }\n    }\n}\n\n","import {ComponentInternalInstance, createComponentInstance, setupComponent} from \"./component\";\nimport {ShapeFlags} from \"shared/index\";\nimport {Text, Fragment, VNode, VNodeArrayChildren} from \"runtime-core/vnode\";\nimport {createAppAPI} from \"runtime-core/apiCreateApp\";\n\nexport interface RendererNode {\n    [key: string]: any\n}\n\nexport interface RendererElement extends RendererNode {}\n\nexport type RootRenderFunction<HostElement = RendererElement> = (\n    vnode: VNode | null,\n    container: HostElement\n) => void\n\nexport interface RendererOptions<HostNode = RendererNode,\n    HostElement = RendererElement> {\n    patchProp(\n        el: HostElement,\n        key: string,\n        prevValue: any,\n        nextValue: any\n    ): void,\n\n    insert(el: HostNode, parent: HostElement): void,\n\n    createElement(type: string): HostElement\n}\n\nexport interface RendererElement extends RendererNode {}\n\ntype PatchFn = (\n    n1: VNode | null,\n    n2: VNode,\n    container: RendererElement,\n    anchor?: RendererNode | null,\n    parentComponent?: ComponentInternalInstance | null\n) => void\n\ntype MountChildrenFn = (\n    children: VNodeArrayChildren,\n    container: RendererElement,\n    anchor: RendererNode | null,\n    parentComponent: ComponentInternalInstance | null,\n    start?: number\n) => void\n\n\nexport function createRenderer<HostNode = RendererNode,\n    HostElement = RendererElement>(options: RendererOptions<HostNode, HostElement>) {\n    return baseCreateRenderer(options);\n}\n\n\nfunction baseCreateRenderer(\n    options: RendererOptions\n): any {\n\n    const {\n        patchProp,\n        insert,\n        createElement\n    } = options;\n\n    /**\n     * 渲染函数\n     * @param vnode\n     * @param container\n     */\n    const render: RootRenderFunction = (vnode, container)=> {\n        if (vnode !== null) {\n            patch(null, vnode, container, null, null)\n        }\n    }\n\n    /**\n     * @param n1\n     * @param n2\n     * @param container\n     * @param anchor\n     * @param parentComponent\n     */\n    const patch: PatchFn = (\n        n1,\n        n2,\n        container,\n        anchor = null,\n        parentComponent = null\n    ) => {\n        const {type, shapeFlag} = n2;\n\n        switch (type) {\n            case Text:\n                processText(n1, n2, container);\n                break;\n            case Fragment:\n                processFragment(n1, n2, container, anchor, parentComponent);\n                break;\n            default:\n                // 使用shapeFlag判断vnode类型\n                if (shapeFlag & ShapeFlags.ELEMENT/* element类型 */) {\n                    processElement(\n                        n1,\n                        n2,\n                        container,\n                        anchor,\n                        parentComponent\n                    );\n                } else if (shapeFlag & ShapeFlags.COMPONENT/* 组件类型 */) {\n                    processComponent(\n                        n1,\n                        n2,\n                        container,\n                        anchor,\n                        parentComponent\n                    )\n                }\n        }\n    }\n\n    function processText(\n        n1: VNode | null,\n        n2: VNode,\n        container: RendererElement) {\n        const {children} = n2;\n        const textNode = document.createTextNode(children as string);\n        container.append(textNode);\n    }\n\n    /**\n     * 处理Fragment，自渲染子节点\n     * @param n1\n     * @param n2\n     * @param container\n     * @param anchor\n     * @param parentComponent\n     */\n    function processFragment(\n        n1: VNode | null,\n        n2: VNode,\n        container: RendererElement,\n        anchor: RendererNode | null,\n        parentComponent: ComponentInternalInstance | null\n    ) {\n        mountChildren(\n            n2.children as VNodeArrayChildren,\n            container,\n            anchor,\n            parentComponent\n        );\n    }\n\n    /**\n     * 处理Element\n     * @param n1\n     * @param n2\n     * @param container\n     * @param anchor\n     * @param parentComponent\n     */\n    function processElement(\n        n1: VNode | null,\n        n2: VNode,\n        container: RendererElement,\n        anchor: RendererNode | null,\n        parentComponent: ComponentInternalInstance | null\n    ) {\n        if (n1 === null) {\n            mountElement(n2, container, anchor, parentComponent);\n        }\n    }\n\n    /**\n     * 挂载Element\n     * @param vnode\n     * @param container\n     * @param anchor\n     * @param parentComponent\n     */\n    function mountElement(\n        vnode: VNode,\n        container: RendererElement,\n        anchor: RendererNode | null,\n        parentComponent: ComponentInternalInstance | null\n    ) {\n        const el = vnode.el = createElement(vnode.type);\n\n        const {children, props, shapeFlag} = vnode;\n        if (shapeFlag & ShapeFlags.TEXT_CHILDREN) { // 文本节点\n            el.textContent = children;\n        } else if (shapeFlag & ShapeFlags.ARRAY_CHILDREN) {  // 虚拟节点数组\n            mountChildren(\n                children as VNodeArrayChildren,\n                el,\n                null,\n                parentComponent\n            )\n        }\n\n        for (const key in props) {\n            const val = props[key];\n\n            patchProp(el, key, '', val);\n        }\n\n        insert(el, container);\n    }\n\n    /**\n     * 挂载子节点\n     * @param children\n     * @param container\n     * @param anchor\n     * @param parentComponent\n     * @param start\n     */\n    const mountChildren: MountChildrenFn = (\n        children,\n        container,\n        anchor,\n        parentComponent,\n        start = 0\n    ) => {\n        for (let i = start; i < children.length; i++) {\n            const child = children[i] as VNode;\n            patch(null, child, container, anchor, parentComponent);\n        }\n    }\n\n    /**\n     * 处理Component\n     * @param n1\n     * @param n2\n     * @param container\n     * @param anchor\n     * @param parentComponent\n     */\n    function processComponent(\n        n1: VNode | null,\n        n2: VNode,\n        container: RendererElement,\n        anchor: RendererNode | null,\n        parentComponent: ComponentInternalInstance | null\n    ) {\n        if (n1 == null) {\n            mountComponent(n2, container, anchor, parentComponent)\n        }\n    }\n\n    /**\n     * 挂载Component\n     * @param initialVNode\n     * @param container\n     * @param anchor\n     * @param parentComponent\n     */\n    function mountComponent(\n        initialVNode: VNode,\n        container: RendererElement,\n        anchor: RendererNode | null,\n        parentComponent: ComponentInternalInstance | null\n    ) {\n        // 创建组件实例\n        const instance = createComponentInstance(initialVNode, parentComponent);\n        // 初始化组件\n        setupComponent(instance);\n        // 渲染组件\n        setupRenderEffect(\n            instance,\n            initialVNode,\n            container,\n            anchor\n        );\n    }\n\n    /**\n     * 渲染组件\n     * @param instance\n     * @param initialVNode\n     * @param container\n     * @param anchor\n     */\n    function setupRenderEffect(\n        instance: ComponentInternalInstance,\n        initialVNode: VNode,\n        container: RendererElement,\n        anchor: RendererNode | null\n    ) {\n        // 取出代理，在后续绑定render函数\n        const proxy = instance.proxy;\n        // 执行render函数，获取返回的vnode\n        const subTree = instance.render.call(proxy);\n\n        patch(null, subTree, container, anchor, instance);\n\n        // 当全部组件挂载结束后，赋值el属性\n        initialVNode.el = subTree.el;\n    }\n\n    return {\n        render,\n        createApp: createAppAPI(render)\n    }\n}\n","import {RendererOptions} from \"runtime-core/index\";\n\nconst doc = (typeof document !== 'undefined' ? document : null) as Document\n\nexport const nodeOps: Omit<RendererOptions<Node, Element>, 'patchProp'> = {\n    insert: (child, parent) => {\n        parent.insertBefore(child, null);\n    },\n\n    createElement: (tag: string): Element => {\n        const el = doc.createElement(tag);\n\n        return el;\n    }\n}\n","import {RendererOptions} from \"runtime-core/index\";\n\ntype DOMRendererOptions = RendererOptions<Node, Element>\n\nexport const patchProp: DOMRendererOptions['patchProp'] = (\n    el,\n    key,\n    prevValue,\n    nextValue\n) => {\n    const isOn = (key: string) => /^on[A-Z]/.test(key);\n    if (isOn(key)) {\n        const event = key.slice(2).toLocaleLowerCase();\n        el.addEventListener(event, nextValue);\n    } else {\n        el.setAttribute(key, nextValue);\n    }\n}\n","import {createRenderer} from 'runtime-core/index';\nimport {extend} from 'shared/index'\n\nimport {nodeOps} from './nodeOps'\nimport {patchProp} from \"./patchProp\"\n\nconst rendererOptions = extend({patchProp}, nodeOps)\n\nconst renderer = createRenderer(rendererOptions);\n\nexport const createApp = (...args) => renderer.createApp(...args);\n\nexport * from \"runtime-core/index\";\n\n"],"names":[],"mappings":"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"}